import{g as o,s as n,l as i,e as a,p as c,b as d}from"./vidstack-DiG3_DXK.js";import{d as h}from"./vidstack-D0IjUeMf.js";function u(s,e=3e3){const t=o();return setTimeout(()=>{const r=s();r&&t.reject(r)},e),t}class l{constructor(e){this.db=e,this.cb=n(""),this.referrerPolicy=null,e.setAttribute("frameBorder","0"),e.setAttribute("aria-hidden","true"),e.setAttribute("allow","autoplay; fullscreen; encrypted-media; picture-in-picture; accelerometer; gyroscope"),this.referrerPolicy!==null&&e.setAttribute("referrerpolicy",this.referrerPolicy)}get iframe(){return this.db}setup(){i(window,"message",this.Lg.bind(this)),i(this.db,"load",this.lc.bind(this)),a(this.fd.bind(this))}fd(){const e=this.cb();if(!e.length){this.db.setAttribute("src","");return}const t=c(()=>this.Te());this.db.setAttribute("src",h(e,t))}gd(e,t){this.db.contentWindow?.postMessage(JSON.stringify(e),t??"*")}Lg(e){const t=this.eb();if((e.source===null||e.source===this.db?.contentWindow)&&(!d(t)||t===e.origin)){try{const r=JSON.parse(e.data);r&&this.hd(r,e);return}catch{}e.data&&this.hd(e.data,e)}}}export{l as E,u as t};
